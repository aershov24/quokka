extends ./layout.jade

block body
  body(ng-controller='bookmarksController')
    nav.navbar.navbar-inverse
      .container-fluid
        .navbar-header
          button.navbar-toggle(type='button', data-toggle='collapse', data-target='#myNavbar')
            span.icon-bar
            span.icon-bar
            span.icon-bar
          a.navbar-brand(href='#') Quokka
        #myNavbar.collapse.navbar-collapse
          ul.nav.navbar-nav
            li
              a(href='/')
                span.glyphicon.glyphicon-list
                |  Lists
            li.active
              a(href='/mybookmarks')
                span.glyphicon.glyphicon-bookmark
                |  Bookmarks
            li
              a(href='/search')
                span.glyphicon.glyphicon-search
                |  Search
          ul.nav.navbar-nav.navbar-right
            li
              a(href='/users/profile')
                img.img-circle(width='25px', ng-src='http://graph.facebook.com/{{profile.facebookId}}/picture?type=square')
                |  {{profile.email}}
            li
              a(href='/users/logout')
                span.glyphicon.glyphicon-log-in
                |  Logout
    .container
      h3(style='\
      margin-top: 0px;\
      margin-bottom: 15px;') My Bookmarks
      br
      .panel-group
        .panel.panel-default(data-ng-repeat='bookmark in bookmarks')
          .panel-heading
            h4.panel-title
              .row
                table(style='width: 100%')
                  tr
                    td(align='left')
                      .col-md-12
                        a(data-toggle='collapse', href='#collapse{{bookmark.listId._id}}') {{ bookmark.listId.title }}
                    td(align='right')
                      .col-md-12
                        table
                          tr
                            td
                              a(href='')
                                img.img-circle(width='25px', ng-src='http://graph.facebook.com/{{bookmark.listId.userId.facebookId}}/picture?type=square')
                            td(style='white-space:nowrap')
                              a(data-ng-click='deleteBookmark(bookmark._id)', href='javascript:;')
                                span.glyphicon.glyphicon-trash
          .panel-collapse.collapse(id='collapse{{bookmark.listId._id}}')
            .panel.panel-default
              .panel-body
                p
                  ul.list-group
                    li.list-group-item(data-ng-repeat="item in bookmark.listId.items | orderBy: 'orderId'")
                      table
                        tr
                          td(width='100%', align='left')
                            | {{item.title}}
            .panel-footer
              table(width='100%')
                tr
                  td(width='4%')
                    span.glyphicon.glyphicon-tags Â 
                  td(width='100%')
                    tags-input(ng-model='bookmark.listId.ngTags', ng-disabled='true', maxtags='4', on-tag-added='tagAdded($tag)', on-tag-removed='tagRemoved($tag)')
      .loader(data-loading='') Loading...
    include ./footer.jade
