<!-- index.html -->
<!doctype html>

<!-- ASSIGN OUR ANGULAR MODULE -->
<html ng-app="quokka">
<head>
    <!-- META -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Optimize mobile viewport -->

    <title>Quokka</title>

    <!-- SCROLLS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" integrity="sha512-dTfge/zgoMYpP7QbHy4gWMEGsbsdZeCXz7irItjcC3sPUFtf0kuFbDz/ixG7ArTxmDjLXDmezHubeNikyKGVyQ==" crossorigin="anonymous"><!-- load bootstrap -->
	<link rel="stylesheet" href="./css/ng-tags-input.min.css">
	<link rel="stylesheet" href="./css/ng-tags-input.bootstrap.min.css">
	<link rel="stylesheet" href="./css/sticky-footer-navbar.css">
	<link rel="stylesheet" href="./css/style.css">

    <!-- SPELLS -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script><!-- load jquery -->
    <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular.min.js"></script><!-- load angular -->
	<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
	<script src="./libs/Sortable.min.js"></script>
	<script src="./libs/ng-sortable.js"></script>
	<script src="./libs/ng-tags-input.min.js"></script>
	<script src="./libs/quokka.js"></script>

</head>
<!-- SET THE CONTROLLER AND GET ALL TODOS -->
<body ng-controller="quokkaController">
<nav class="navbar navbar-inverse">
  <div class="container-fluid">
    <div class="navbar-header">
	  <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span> 
      </button>
      <a class="navbar-brand" href="#">Quokka</a>
    </div>
    <div class="collapse navbar-collapse" id="myNavbar">
      <ul class="nav navbar-nav">
        <li class="active"><a href="/"><span class="glyphicon glyphicon-list"></span> Lists</a></li>
        <li><a href="/bookmarks"><span class="glyphicon glyphicon-bookmark"></span> Bookmarks</a></li>
        <li><a href="/search"><span class="glyphicon glyphicon-search"></span> Search</a></li> 
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li><a href="/users/profile">
        	<img width="25px" ng-src="http://graph.facebook.com/{{profile.facebookId}}/picture?type=square" class="img-circle"> {{profile.email}}</a></li>
        <li><a href="/users/logout"><span class="glyphicon glyphicon-log-in"></span> Logout</a></li>
      </ul>
    </div>
  </div>
</nav>

<div class="container">
<h3 style="
    margin-top: 0px;
    margin-bottom: 15px;">My lists</h3>

						<div id="list-form" class="row">
								<div class="col-sm-12">
									<form>
									<table width="100%">
										<tr>
											<td width="100%"><input type="text" class="form-control input-md" placeholder="New list" ng-model="formData.title"></td>
											<td align="right" 
											style="padding-left: 10px;"><button type="submit" class="btn btn-success btn-md" ng-click="createList()">Add List</button></td>
										</tr>
									</table>
									</form>
								</div>
					</div>

				</br>
	
	<div class="panel-group">
		  <div class="panel panel-default" data-ng-repeat="list in lists">
			<div class="panel-heading">
			  <h4 class="panel-title">
			   <div class="row">
                                <table style="width: 100%">
                                    <tr>
                                        <td align="left">
                                            <div class="col-md-12">
                                                <a data-toggle="collapse" data-ng-hide="list.editMode" href="#collapse{{list._id}}"><b>{{ list.title }}</b></a>
                                                <input  class="form-control input-md" data-ng-show="list.editMode" type="text" data-ng-model="list.title" />
                                            </div>
                                        </td>
                                        <td align="right">
                                            <div class="col-md-12">
                                                <table>
                                                    <tr>
                                                    	<td>
													          <div data-ng-hide="list.editMode" class="dropdown">
													          	<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"><span class="glyphicon glyphicon-tasks"></span></a>
														          <ul class="dropdown-menu dropdown-menu-right">
														            <li><a href="javascript:;" data-ng-click="toggleEdit(list)">Edit</a></li>
														            <li><a href="javascript:;" data-ng-click="share(list)">Share</a></li>
														            <li role="separator" class="divider"></li>
														            <li><a href="javascript:;" data-ng-click="deleteList(list._id)">Delete</a></li>
														          </ul>
													      	</div>
													      	<div data-ng-show="list.editMode" class="dropdown">
													          	<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"><span class="glyphicon glyphicon-pencil"></span></a>
														          <ul class="dropdown-menu dropdown-menu-right">
														            <li><a data-ng-click="saveList(list)" href="javascript:;">Save</a></li>
											          				<li><a data-ng-click="toggleEdit(list)" href="javascript:;">Cancel</a></li>
														          </ul>
													      	</div>
                                                    	</td>
                                                    </tr>
                                                </table>

                                                </div>
                                        </td>
                                    </tr>
                                </table>
                            </div>
			  </h4>
			</div>
			<div id="collapse{{list._id}}" class="panel-collapse collapse">
				<div class="panel panel-default">
					<div class="panel-body">
					<p><em>{{list.description}}</em></p>
									<div class="panel-body" style="padding-top: 0px;">
										<!-- FORM TO CREATE LIST -->
										<div id="list-form" class="row">
										<div class="col-sm-12" style="padding-left: 0px; padding-right: 0px;">
											<form>
											<table width="100%">
											<tr>
											<td width="100%"><input type="text" class="form-control input-md" placeholder="New item" ng-model="newListItem.title"></td>
											<td  align="right" 
											style="padding-left: 10px;"><button type="submit" class="btn btn-success btn-md" ng-click="createListItem(list)">Add Item</button></td>
											</tr>
											</table>
											</form>
										</div>
										</div>
									</div>
						
						<div class="top5">
						<ul class="list-group" ng-sortable="sortConfig" 
						style="margin-bottom: 0px;">
						<li class="list-group-item" data-ng-repeat="item in list.items | orderBy: 'orderId'" >
							<table>
								<tr>
									<td align="left">
										<span class="my-handle"><span class="glyphicon glyphicon-option-horizontal">&nbsp;</span></span>
									</td>
									<td width="100%" align="left">
										{{item.title}}
									</td>
									<td align="right">
										<a data-ng-click="deleteListItem(item._id)" href="javascript:;"><span class="glyphicon glyphicon-remove"></span></a>
									</td>
								</tr>
							</table>
							</li>
						</ul>
					</div>
					</div>
				</div>
			
				<div class="panel-footer">
				    <table width="100%">
					<tr>
					<td width="4%"><span class="glyphicon glyphicon-tags">&nbsp;</span></td>
					<td width="100%"><tags-input placeholder="tags" ng-model="list.ngTags" 
								maxTags="4"
                                on-tag-added="tagAdded($tag)"
                                on-tag-removed="tagRemoved($tag)">
					</tags-input></td>
					</tr>
					</table>
				</div>
			</div>
		  </div>
	</div>
</div>
<footer class="footer">
      <div class="container">
        <p class="text-muted">Alex Ershov - 2015</p>
      </div>
    </footer>
</body>
</html>