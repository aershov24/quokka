<!-- index.html -->
<!doctype html>

<!-- ASSIGN OUR ANGULAR MODULE -->
<html ng-app="quokka">
<head>
    <!-- META -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Optimize mobile viewport -->

    <title>Quokka</title>

    <!-- SCROLLS -->
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css"><!-- load bootstrap -->
	<link rel="stylesheet" href="./css/ng-tags-input.min.css">
	<link rel="stylesheet" href="./css/ng-tags-input.bootstrap.min.css">

    <!-- SPELLS -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script><!-- load jquery -->
    <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular.min.js"></script><!-- load angular -->
	<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
	<script src="./libs/Sortable.min.js"></script>
	<script src="./libs/ng-sortable.js"></script>
	<script src="./libs/ng-tags-input.min.js"></script>
	<script src="./libs/quokka.js"></script>

</head>
<!-- SET THE CONTROLLER AND GET ALL TODOS -->
<body ng-controller="quokkaController">
<nav class="navbar navbar-default">
  <div class="container-fluid">
    <div class="navbar-header">
      <a class="navbar-brand" href="#">Quokka</a>
    </div>
    <div>
      <ul class="nav navbar-nav">
        <li class="active"><a href="#">Lists</a></li>
        <li><a href="#">Search</a></li>
        <li><a href="#">Bookmarks</a></li> 
      </ul>
    </div>
  </div>
</nav>

<div class="container">


	<div class="panel-group">
		<div class="panel panel-success">
			<div class="panel-heading">
			  <h4 class="panel-title">
			    <span class="glyphicon glyphicon-plus"></span>
				<a data-toggle="collapse" href="#collapseAddList">Add new list</a>
			  </h4>
			</div>
			<div id="collapseAddList" class="collapse">
				<div class="panel-body">
					<!-- FORM TO CREATE LIST -->
					<div id="list-form" class="row">
							<form>
								<div class="col-sm-8"><input type="text" class="form-control input-md" placeholder="Title" ng-model="formData.title"></div>
								<div class="col-sm-4"><button type="submit" class="btn btn-success btn-md" ng-click="createList()">Add</button></div>
							</form>
					</div>
				</div>
			</div>
		</div>
	</div>
	
	<br/>
	<div class="panel-group">
		  <div class="panel panel-default" data-ng-repeat="list in lists">
			<div class="panel-heading">
			  <h4 class="panel-title">
			   <div class="row">
                                <table style="width: 100%">
                                    <tr>
                                        <td align="left">
                                            <div class="col-md-12">
                                                <a data-toggle="collapse" data-ng-hide="list.editMode" href="#collapse{{list._id}}">{{ list.title }}</a>
                                                <input  class="form-control input-md" data-ng-show="list.editMode" type="text" data-ng-model="list.title" />
                                            </div>
                                        </td>
                                        <td align="right">
                                            <div class="col-md-12">
                                                <table>
                                                    <tr>
                                                        <td style="white-space:nowrap">
                                                            <a data-ng-hide="list.editMode" data-ng-click="toggleEdit(list)" href="javascript:;"><span class="glyphicon glyphicon-edit"></span></a>
                                                            <a data-ng-hide="list.editMode" data-ng-click="deleteList(list._id)" href="javascript:;"><span class="glyphicon glyphicon-trash"></span></a>

                                                        </td>
                                                        <td style="white-space:nowrap">
                                                            <a data-ng-show="list.editMode" data-ng-click="saveList(list)" href="javascript:;"><span class="glyphicon glyphicon-ok"></span></a>
                                                            <a data-ng-show="list.editMode" data-ng-click="toggleEdit(list)" href="javascript:;"><span class="glyphicon glyphicon-remove"></span></a>
                                                        </td>
                                                    </tr>
                                                </table>

                                                </div>
                                        </td>
                                    </tr>
                                </table>
                            </div>
			  </h4>
			</div>
			<div id="collapse{{list._id}}" class="panel-collapse collapse">
				<div class="panel panel-default">
					<div class="panel-body">
						<div class="panel-group">
							<div class="panel panel-success">
								<div class="panel-heading">
								  <h4 class="panel-title">
									<span class="glyphicon glyphicon-plus"></span>
									<a data-toggle="collapse" href="#collapseAddItem{{list._id}}">Add new item</a>
								  </h4>
								</div>
								<div id="collapseAddItem{{list._id}}" class="collapse">
									<div class="panel-body">
										<!-- FORM TO CREATE LIST -->
										<div id="list-form" class="row">
											<form>
												<div class="col-sm-8"><input type="text" class="form-control input-md" placeholder="Title" ng-model="newListItem.title"></div>
												<div class="col-sm-4"><button type="submit" class="btn btn-success btn-md" ng-click="createListItem(list)">Add</button></div>
											</form>
										</div>
									</div>
								</div>
							</div>
						</div>
						
										<p>
						<ul class="list-group" ng-sortable>
						<li class="list-group-item" data-ng-repeat="item in list.items">
							<table>
								<tr>
									<td width="100%" align="left">
										{{item.title}}
									</td>
									<td align="right">
										<a data-ng-click="deleteListItem(item._id)" href="javascript:;"><span class="glyphicon glyphicon-remove"></span></a>
									</td>
								</tr>
							</table>
							</li>
						</ul>
					</p>
					</div>
				</div>
			
				<div class="panel-footer">
					<tags-input placeholder="tags" ng-model="list.ngTags" 
								maxTags="4"
                                on-tag-added="tagAdded($tag)"
                                on-tag-removed="tagRemoved($tag)">
					</tags-input>
				</div>
			</div>
		  </div>
	</div>
</div>
</body>
</html>